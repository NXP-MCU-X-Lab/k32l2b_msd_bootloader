/* Flash OS Routines (Automagically Generated)
 * Copyright (c) 2009-2015 ARM Limited
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

static const uint32_t MKE1x_P64_1KB_SEC_flash_prog_blob[] = {
    0xE00ABE00, 0x062D780D, 0x24084068, 0xD3000040, 0x1E644058, 0x1C49D1FA, 0x2A001E52, 0x4770D1F2,
    0xb5104942, 0x60084449, 0x21fe4840, 0x1d004448, 0x21ff7001, 0x70817041, 0x202f70c1, 0x0280493c,
    0x483c60c8, 0x064968c1, 0x29020f89, 0x68c1d106, 0x4011229f, 0x694160c1, 0xd1fc2901, 0x49364837,
    0x49376041, 0x49376081, 0x48386001, 0x44484936, 0x22016001, 0x21000412, 0x60416082, 0x1e497701,
    0xf0006201, 0x2800f918, 0x2001d000, 0x2000bd10, 0x4a2f4770, 0x447ab508, 0x92000389, 0x46010c0a,
    0x2300482a, 0xf0004448, 0x2800fa06, 0x2001d000, 0xb508bd08, 0x44794926, 0x39204824, 0xf0004448,
    0x2800f888, 0x4822d10e, 0x38324478, 0x90004b17, 0x444b481e, 0x22041d1b, 0x4448491e, 0xf8f0f000,
    0xd0002800, 0xbd082001, 0x4b19b510, 0x4601447b, 0x22014816, 0x02923b56, 0xf0004448, 0x2800f88d,
    0x2001d000, 0xb508bd10, 0x1cc94613, 0x4910088a, 0x44790092, 0x9100397c, 0x480c4601, 0xf0004448,
    0x2800f8cf, 0x2001d000, 0x0000bd08, 0x00000004, 0xf0003000, 0x4007e000, 0xd928c520, 0x40052000,
    0x0000ffff, 0x00002020, 0x40020000, 0x0000000c, 0x0000010f, 0x0000040c, 0x4607b5f8, 0x20004614,
    0x190a460d, 0x68799000, 0x42a9461e, 0x68bbd803, 0x429118c9, 0x2101d203, 0x24000309, 0x21009100,
    0xe00d6031, 0x68327829, 0x18511c40, 0x1c6d1e64, 0x280a6031, 0x6a38d304, 0xd0001c41, 0x20004780,
    0xd1ef2c00, 0xbdf89800, 0x4604b570, 0x78016800, 0x43112280, 0x68257001, 0x6a21e003, 0xd0001c48,
    0x78284788, 0xd5f80600, 0x78006820, 0x40082131, 0x6802bd70, 0x70132331, 0x23446802, 0x470871d3,
    0x23316802, 0x68027013, 0x71d32349, 0xb5104708, 0x21006802, 0x06db7853, 0x7813d50c, 0x43232480,
    0x68007013, 0x1c49e001, 0x7802b289, 0xd5fa0612, 0xd8f82920, 0xbd102000, 0x460cb5ff, 0x68694605,
    0xb0812000, 0x428c4616, 0x68aad307, 0x42a21852, 0x1a64d903, 0x02bf2701, 0x2020e001, 0x1e792600,
    0xd015420e, 0x03402001, 0x6828e012, 0x70012131, 0x21096828, 0x682871c1, 0x71810c21, 0x0a216828,
    0x68287141, 0x99047104, 0x47884628, 0x19e41bf6, 0xd0012e00, 0xd0e82800, 0xbdf0b005, 0x780a6801,
    0xd4070612, 0x2310784a, 0x704a431a, 0x78016800, 0xd5fc0609, 0x47702000, 0x78806800, 0x0f920782,
    0xd0062a02, 0x28020980, 0x2004d000, 0x20007008, 0x20014770, 0x2100e7fa, 0x61816101, 0x47704608,
    0x4604b5f8, 0x2000460d, 0x4616461f, 0xd0020791, 0x03402001, 0x6861bdf8, 0xd305428d, 0x185268a2,
    0xd90142aa, 0xe0201a6d, 0xe01e2020, 0x21316820, 0x68207001, 0x71c12106, 0x0c296820, 0x68207181,
    0x71410a29, 0x71056820, 0x46012000, 0x31086822, 0x5c3a1851, 0x1c40700a, 0x2804b2c0, 0x9906d3f5,
    0x47884620, 0x1f361d2d, 0x2e001d3f, 0x2800d0d2, 0xbdf8d0dc, 0x4616b5f8, 0x4604461f, 0xd0020792,
    0x03402001, 0x6862bdf8, 0x42919200, 0x68a3d306, 0x428a189a, 0x9a00d902, 0xe02a1a8d, 0xbdf82020,
    0x21316820, 0x68207001, 0x71c12102, 0x0c296820, 0x68207181, 0x71410a29, 0x71056820, 0x99076820,
    0x200072c1, 0x68224601, 0x1851310c, 0x700a5c3a, 0xb2c01c40, 0xd3f52804, 0x46209908, 0x28004788,
    0x9900d004, 0x9906186a, 0x600a2604, 0x1f361d2d, 0x2e001d3f, 0xbdf8d1d4, 0x6804b430, 0x70252531,
    0x25436804, 0x680471e5, 0x210071a1, 0x6805460c, 0x192c3408, 0x70255c55, 0xb2c91c49, 0xd3f52904,
    0x4718bc30, 0x4604b570, 0x68004615, 0x70022231, 0x22416820, 0x682071c2, 0x46207181, 0x00024798,
    0x2100d10a, 0x68234608, 0x18183008, 0x54687800, 0xb2c91c49, 0xd3f52904, 0xbd704610, 0x4604b570,
    0x68404615, 0x42819a04, 0x68a6d324, 0x428e1836, 0x1a08d920, 0x26316821, 0x6821700e, 0x71ce2603,
    0x0c066821, 0x6821718e, 0x714e0a06, 0x71086821, 0x73c36820, 0x47904620, 0xd10a2800, 0x460a2100,
    0x32086823, 0x7812189a, 0x1c49546a, 0x2904b2c9, 0xbd70d3f5, 0xbd702020, 0x6803b430, 0x701c2431,
    0x24456803, 0x230071dc, 0x6805461c, 0x192c3408, 0x70255ccd, 0xb2db1c5b, 0xd3f52b08, 0x4710bc30,
    0x6803b430, 0x701c2431, 0x24406803, 0x680371dc, 0xbc307199, 0xb4f04710, 0x9d046844, 0xd31c42a1,
    0x19366886, 0xd918428e, 0x68041b09, 0x70262631, 0x26016804, 0x680471e6, 0x71a60c0e, 0x0a0e6804,
    0x68047166, 0x68017121, 0x72cc0a14, 0x728a6801, 0x724b6801, 0xbcf046ac, 0xbcf04760, 0x47702020,
    0x6800b510, 0x7c847cc3, 0x7c007c42, 0x0424061b, 0x02124323, 0x43034313, 0x600b2000, 0xb5f0bd10,
    0x0e0c020a, 0x040a0e13, 0x25006806, 0xb2c90e12, 0x7cf774f4, 0x74b36806, 0x46b47cb6, 0x74726806,
    0x68007c76, 0x7c007401, 0xd10542a7, 0xd103459c, 0xd1014296, 0xd0014288, 0x350125ff, 0xbdf04628,
    0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000,
    0x00000000, 0x00000000, 0x00000000, 0x00000000
};

// Start address of flash
static const uint32_t flash_start = 0x00000000;
// Size of flash
static const uint32_t flash_size = 0x00010000;

/**
* List of start and size for each size of flash sector - even indexes are start, odd are size
* The size will apply to all sectors between the listed address and the next address
* in the list.
* The last pair in the list will have sectors starting at that address and ending
* at address flash_start + flash_size.
*/
static const uint32_t sectors_info[] = {
    0x00000000, 0x00000400,
};

static const program_target_t flash = {
    0x20000021, // Init
    0x2000008f, // UnInit
    0x200000b3, // EraseChip
    0x200000e9, // EraseSector
    0x20000107, // ProgramPage

    // BKPT : start of blob + 1
    // RSB  : blob start + header + rw data offset
    // RSP  : stack pointer
    {
        0x20000001,
        0x20000560,
        0x20000800
    },

    0x20000000 + 0x00000A00,  // mem buffer location
    0x20000000,               // location to write prog_blob in target RAM
    sizeof(MKE1x_P64_1KB_SEC_flash_prog_blob),   // prog_blob size
    MKE1x_P64_1KB_SEC_flash_prog_blob,           // address of prog_blob
    0x00000400       // ram_to_flash_bytes_to_be_written
};